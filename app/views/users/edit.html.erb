<% provide(:title, "#{@user.name}'s Settings") %>

<div>
    <h2 style="text-align: left !important; font-size: 1.9em !important"><%= @user.name %>'s Account Settings</h2>
</div>

<div>

    <div>
        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">General</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Security</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false">Connected Services</a>
        </li>
        </ul>
    </div>

    <div>
        <div class="tab-content" id="pills-tabContent">

        <!-- Connected Services section goes here -->
        <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">THIS IS GENERAL STUFF</div>
    
        <!-- Security section goes here -->
        <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
            <div>
                <div id="security">
                    <h4>Two factor authentication</h4>
                    <h5 class="text-muted">Requires Google Authenticator</h5>
                </div>
                <div id="security" class="pull-right">
                    <%= form_for(:twoFA, url: two_factor_auth_path) do |f| %>
                        <% if @user.encrypted_2fa_secret.nil? %>
                        
                            <%= f.hidden_field :twoFA_auth, value: "on" %>  
                            <%= f.hidden_field :twoFA_userId, value: @user.id %>                          
                            <%= f.submit "Turn on", class: "btn btn-success twoFA_twoFA_auth" %>
                        <% else %>
                            <%= f.hidden_field :twoFA_auth, value: "off" %>  
                            <%= f.hidden_field :twoFA_userId, value: @user.id %>                          
                            <%= f.submit "Turn off", class: "btn btn-danger twoFA_twoFA_auth" %>
                        <% end %>
                    <% end %>
                </div>
                <hr class="style1">
            </div>
        </div>

        <!-- Connected Services section goes here -->
        <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">THIS IS FOR CONNECTED SERVICES STUFF</div>
    </div>
</div>